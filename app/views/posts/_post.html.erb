<div id="<%= dom_id post %>">
  <article>
    <!-- Title -->
    <div style="margin-bottom:0.5rem;">
      <h2 style="margin:0;"> <%= post.title %> </h2>
    </div>

    <!-- Body -->
    <div class="post-body" style="margin-bottom:0.75rem;">
      <%= post.body %>
    </div>

    <!-- Meta: views -->
    <div style="margin-bottom:0.5rem; font-size:0.85rem; color:#555;">
      Visualizzazioni: <%= post.views_count %>
    </div>

    <!-- Likes (count + button on same line) -->
    <div style="display:flex; align-items:center; gap:0.5rem; margin-bottom:0.75rem;">
      <%= render "likes/like", likeable: post %>
    </div>

    <!-- Emoji Reactions -->
    <div id="reactions_<%= post.id %>" style="margin-bottom:0.5rem;">
      <% grouped = post.reactions.group_by(&:kind) %>
      <div style="margin-bottom:0.25rem;">
        <% grouped.each do |kind, list| %>
          <span style="margin-right:0.5rem;"><%= kind %> x <%= list.size %></span>
        <% end %>
      </div>
      <div>
        <% ["ðŸ˜€","ðŸ”¥","â¤ï¸","ðŸ‘"].each do |emoji| %>
          <%= button_to emoji, react_post_path(post_id: post.id, kind: emoji), method: :post, form: { data: { turbo_stream: true }, style: "display:inline-block; margin-right:0.25rem;" } %>
        <% end %>
      </div>
    </div>

    <!-- Note: Comments are rendered on the show page below the post, to avoid duplication. -->

  </article>
</div>
